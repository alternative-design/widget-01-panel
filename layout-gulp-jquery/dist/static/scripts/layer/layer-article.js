"use strict";jQuery(document).ready(function(){var e=$(".cd-intro-block"),i=$(".cd-projects-wrapper"),n=i.children(".cd-slider"),s=$(".cd-project-content"),t=$(".cd-slider-navigation"),r=!1;function l(){if("desktop"==window.getComputedStyle(document.querySelector(".cd-projects-wrapper"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")){var e=n.children("li"),i=e.eq(0).width(),s=Number(n.children("li").eq(1).css("margin-left").replace("px","")),t=(i+s)*(e.length+1)+"px",l=n.children("li.current").index();n.css("width",t),0!=l&&d(n,l*(i+s)+"px")}else n.css("width",""),d(n,0);r=!1}function a(e){var i=e.children(".current"),n=i.index(),s=i.nextAll("li").length,t=i.width(),r=Number(e.children("li").eq(1).css("margin-left").replace("px","")),l=(n=s>4?n+3:n+s-2)*(t+r)+"px";e.addClass("next"),d(e,l),e.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){c("next",i,e,s)}),$(".no-csstransitions").length>0&&c("next",i,e,s)}function o(e){var i=e.children(".previous"),n=i.index(),s=i.width(),t=Number(e.children("li").eq(1).css("margin-left").replace("px",""));console.log(t);var r=n*(s+t)+"px";e.addClass("prev"),d(e,r),e.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){c("prev",i,e)}),$(".no-csstransitions").length>0&&c("prev",i,e)}function c(e,n,s,r){var l;"next"==e?(s.removeClass("next").find(".previous").removeClass("previous"),n.removeClass("current"),r>4?n.addClass("previous").next("li").next("li").next("li").addClass("current"):4==r?(n.next("li").next("li").addClass("current"),n.prev("li").addClass("previous")):3==r&&(n.next("li").addClass("current"),n.prev("li").prev("li").addClass("previous"))):(s.removeClass("prev").find(".current").removeClass("current"),n.removeClass("previous").addClass("current"),n.prevAll("li").length>2?n.prev("li").prev("li").prev("li").addClass("previous"):!s.children("li").eq(0).hasClass("current")&&s.children("li").eq(0).addClass("previous")),(l=i.find("li.current")).is(":first-child")?t.find(".prev").addClass("inactive"):t.find(".prev").removeClass("inactive"),l.nextAll("li").length<3?t.find(".next").addClass("inactive"):t.find(".next").removeClass("inactive")}function d(e,i){e.css({"-moz-transform":"translateX(-"+i+")","-webkit-transform":"translateX(-"+i+")","-ms-transform":"translateX(-"+i+")","-o-transform":"translateX(-"+i+")",transform:"translateX(-"+i+")"})}l(),$(window).on("resize",function(){r||(window.requestAnimationFrame?window.requestAnimationFrame(l):l(),r=!0)}),e.on("click",'a[data-action="show-projects"]',function(s){s.preventDefault(),e.addClass("projects-visible"),i.addClass("projects-visible"),setTimeout(function(){!function e(i){i.length>0&&setTimeout(function(){i.addClass("slides-in"),e(i.next())},50)}(n.children("li").eq(0))},200)}),e.on("click",function(n){e.hasClass("projects-visible")&&!$(n.target).is('a[data-action="show-projects"]')&&(e.removeClass("projects-visible"),i.removeClass("projects-visible"))}),i.on("click",".cd-slider a",function(e){e.preventDefault(),$(this).parent("li").next("li").is(".current")?o(n):$(this).parent("li").prev("li").prev("li").prev("li").is(".current")?a(n):s.addClass("is-visible")}),s.on("click",".close",function(e){e.preventDefault(),s.removeClass("is-visible")}),t.on("click",".next",function(){a(n)}),t.on("click",".prev",function(){o(n)}),$(document).keyup(function(i){"37"==i.which&&e.hasClass("projects-visible")&&!t.find(".prev").hasClass("inactive")?o(n):"39"==i.which&&e.hasClass("projects-visible")&&!t.find(".next").hasClass("inactive")?a(n):"27"==i.which&&s.hasClass("is-visible")&&s.removeClass("is-visible")}),n.on("swipeleft",function(){!t.find(".next").hasClass("inactive")&&a(n)}),n.on("swiperight",function(){!t.find(".prev").hasClass("inactive")&&o(n)})});